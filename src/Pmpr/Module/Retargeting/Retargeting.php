<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             6952c8cd2d0be             |
    |_______________________________________|
*/
 namespace Pmpr\Module\Retargeting; use Pmpr\Common\Foundation\Container\ModuleInitiator; use Pmpr\Common\Foundation\Interfaces\Constants; class Retargeting extends ModuleInitiator { const acugamimecgcekcs = 'retargeting_'; public function register() { $this->gkieogwukagigisy(__DIR__, [Constants::qescuiwgsyuikume => static function () { return __('Retargeting', PR__MDL__RATING); }, Constants::sguyaymiiiiewame => Setting::class]); } public function wigskegsqequoeks() { $this->waqewsckuayqguos('before_enqueue_frontend_assets', [$this, 'enqueue'])->waqewsckuayqguos('retargeting_render_recently_viewed_template', [$this, 'awuycguwomoiawga'])->waqewsckuayqguos('retargeting_render_most_interested_template', [$this, 'yeaksaqigwmmgkke']); } public function mameiwsayuyquoeq() { if ($this->caokeucsksukesyo()->owicscwgeuqcqaig()->gimisysaiasieees()) { Controller::symcgieuakksimmu(); } } public function enqueue() { $meakksicouekcgoe = $this->caokeucsksukesyo()->usugyumcgeaaowsi(); $wyceuweoyiyegaeu = ['view', 'click', 'interact', 'dwell_time', 'add_to_cart', 'scroll_depth', 'scroll_activity']; $seyqqsmuaiegkeeq = $this->kmuweyayaqoeqiyw()->cycawcecmysuqugy(); foreach ($seyqqsmuaiegkeeq as $kesssewsiegssiya) { $wyceuweoyiyegaeu[] = $kesssewsiegssiya->name; } $yqoecawyuywcoaie = 0; $eeggsugeaowswswe = []; $qwsskwkucuiuwwms = []; foreach ($wyceuweoyiyegaeu as $uagesmomaeuiuwsu) { $mycwwoyokwokowmo = (int) $this->weysguygiseoukqw($uagesmomaeuiuwsu . Setting::kesiooawsgsmykik, 0); if ($yqoecawyuywcoaie < 100 && $mycwwoyokwokowmo > 0) { if ($yqoecawyuywcoaie + $mycwwoyokwokowmo > 100) { $mycwwoyokwokowmo = 100 - $yqoecawyuywcoaie; } $yqoecawyuywcoaie += $mycwwoyokwokowmo; $eeggsugeaowswswe[$uagesmomaeuiuwsu] = $mycwwoyokwokowmo; } $qwsskwkucuiuwwms[$uagesmomaeuiuwsu] = max(1, (int) $this->weysguygiseoukqw($uagesmomaeuiuwsu . Setting::agqiekumowyumqao, 1)); } $mumyimcwkaemyyue = $this->uwkmaywceaaaigwo()->owicscwgeuqcqaig(); $umkkkaqkwugkemce = $gqumacwamusueoqa = 0; $cqyykkywcyeqyokc = 'simple'; if ($mumyimcwkaemyyue->cukiusasccucgwqc(Constants::oguseymmyyoyaako)) { $umkkkaqkwugkemce = $mumyimcwkaemyyue->mwyqswsaeeewsosm(); $gqumacwamusueoqa = $this->caokeucsksukesyo()->ayueggmoqeeukqmq()->ygqycmmkoiuocoia($umkkkaqkwugkemce); if (!empty($gqumacwamusueoqa)) { $cqyykkywcyeqyokc = 'child'; } } $seysimcgoswyoece = $this->caokeucsksukesyo()->wikusamwomuogoau()->giiuwsmyumqwwiyq('permalinks', []); $kmiiouceokmmgqow = $seysimcgoswyoece['product_base'] ?? Constants::oguseymmyyoyaako; $awccimkqkkyeomeu = preg_replace('/%.*?%/', '', trim($kmiiouceokmmgqow, '/')); $seiyqiqwcmseaiaq = ['parent_id' => $gqumacwamusueoqa, 'product_id' => $umkkkaqkwugkemce, 'product_type' => $this->ocksiywmkyaqseou('retargeting_localize_product_type', $cqyykkywcyeqyokc, $umkkkaqkwugkemce), 'event_weights' => $eeggsugeaowswswe, 'event_maximums' => $qwsskwkucuiuwwms, 'sync_interval' => $this->weysguygiseoukqw(Setting::iyuuooymaoosoiyg), 'product_fields' => $this->ocksiywmkyaqseou('retargeting_localize_product_fields', [], $umkkkaqkwugkemce), 'interest_threshold' => $this->weysguygiseoukqw(Setting::iuaysqgcowekwwie), 'product_link_pattern' => "/{$awccimkqkkyeomeu}/"]; $meakksicouekcgoe->yawoscugkyysowie($meakksicouekcgoe->owygwqwawqoiusis($this, 'retargeting', 'frontend.js'))->qgkgieacuwasgiuy($this, $this->ocksiywmkyaqseou('retargeting_localize', $seiyqiqwcmseaiaq, $umkkkaqkwugkemce)); } public function awuycguwomoiawga() { $qqscaoyqikuyeoaw = $this->iuygowkemiiwqmiw('recently_viewed', [Constants::qescuiwgsyuikume => __('Recently Viewed', PR__MDL__RETARGETING)]); echo $this->caokeucsksukesyo()->wgqqgewcmcemoewo()->ssqqsemoqaeqcqka($qqscaoyqikuyeoaw, ['id' => 'retargeting_recently_viewed', 'type' => 'x-tmpl-mustache', 'class' => 'pr-js-tpl', 'data-target' => '.pr-tpl.recently-viewed']); } public function yeaksaqigwmmgkke() { $qqscaoyqikuyeoaw = $this->iuygowkemiiwqmiw('most_interested', [Constants::qescuiwgsyuikume => __('Most Interested', PR__MDL__RETARGETING)]); echo $this->caokeucsksukesyo()->wgqqgewcmcemoewo()->ssqqsemoqaeqcqka($qqscaoyqikuyeoaw, ['id' => 'retargeting_most_interested', 'type' => 'x-tmpl-mustache', 'class' => 'pr-js-tpl', 'data-target' => '.pr-tpl.most-interested']); } }
